<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comorbidity Calculations and Tools for ICD-9 and ICD-10
    Codes • Comorbidity calculations and tools for ICD-9 and ICD-10 codes</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Comorbidity Calculations and Tools for ICD-9 and ICD-10
    Codes">
<meta property="og:description" content="Calculate comorbidities, Charlson and van Walraven
    scores, perform fast and accurate validation, conversion,
    manipulation, filtering and comparison of ICD-9 and ICD-10 codes. This
    package enables a work flow from raw lists of ICD codes in hospital
    databases to comorbidities.  ICD-9 and ICD-10 comorbidity mappings
    from Quan (Deyo and Elixhauser versions), Elixhauser and AHRQ
    included.  Common ambiguities and code formats are handled.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Comorbidity calculations and tools for ICD-9 and ICD-10 codes</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">3.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Charlson_and_other_scores.html">Charlson and Van Walraven scores</a>
    </li>
    <li>
      <a href="articles/Comparing_Comorbidity_Mappings_Vignette.html">Comparing Comorbidity Mappings</a>
    </li>
    <li>
      <a href="articles/Efficient_calculation_of_comorbidities_from_medical_codes.pdf">icd: Efficient Computation of Comorbidities from ICD Codes Using Sparse Matrix Multiplication in R (PDF)</a>
    </li>
    <li>
      <a href="articles/Ranges.html">Ranges of ICD codes</a>
    </li>
    <li>
      <a href="articles/Using_Hierarchical_Condition_Codes.html">Using Hierarchical Condition Codes</a>
    </li>
    <li>
      <a href="articles/icd-10.html">ICD-10 comorbidities</a>
    </li>
    <li>
      <a href="articles/introduction.html">Quick Introduction to icd</a>
    </li>
    <li>
      <a href="articles/pccc.html">Pediatric Complex Chronic Conditions</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!--
Copyright (C) 2014 - 2018  Jack O. Wasey

This file is part of icd.

icd is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

icd is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with icd. If not, see <http:#www.gnu.org/licenses/>.
-->
<!-- README.md is generated from README.Rmd. Please edit that file and render with rmarkdown::render("README.Rmd")
-->
<div id="icd" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#icd" class="anchor"></a>icd</h1></div>

</div>
<div id="comorbidities-from-icd-9-and-icd-10-codes-manipulation-and-validation" class="section level1">
<h1 class="hasAnchor">
<a href="#comorbidities-from-icd-9-and-icd-10-codes-manipulation-and-validation" class="anchor"></a>Comorbidities from ICD-9 and ICD-10 codes, manipulation and validation</h1>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h2>
<ul>
<li>find comorbidities of patients based on admission or discharge ICD-9 or ICD-10 codes, e.g. Cancer, Heart Disease
<ul>
<li>several standard mappings of ICD codes to comorbidities are included (Quan, Deyo, Elixhauser, AHRQ, PCCC)</li>
<li>very fast assignment of ICD codes to comorbidities (using matrix multiplication with C and C++ internally)</li>
</ul>
</li>
<li>summarizing groups of ICD codes in natural language</li>
<li>Charlson and Van Walraven score calculations</li>
<li>Hierarchical Condition Codes (HCC) from CMS</li>
<li>Clinical Classifcations Software (CCS) comorbidities from AHRQ</li>
<li>Pediatric Complex Chronic Condition comorbidities</li>
<li>AHRQ ICD-10 procedure code classification</li>
<li>validation of ICD codes from different annual revisions of ICD-9-CM and ICD-10-CM</li>
<li>correct conversion between different representations of ICD codes, with and without a decimal points, leading and trailing characters (this is not trivial for ICD-9-CM). ICD-9 to ICD-10 cross-walk is not yet implemented</li>
<li>comprehensive test suite to increase confidence in accurate processing of ICD codes</li>
<li>all internal ICD and comorbidity data is extracted directly from publically available data or code, increasing confidence in the results</li>
</ul>
</div>
<div id="install" class="section level2">
<h2 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"icd"</span>)</a></code></pre></div>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Calculate comorbidities, Charlson and van Walraven scores, perform fast and accurate validation, conversion, manipulation, filtering and comparison of ICD-9 and ICD-10 codes. This package enables a work flow from raw lists of ICD codes in hospital databases to comorbidities. ICD-9 and ICD-10 comorbidity mappings from Quan (Deyo and Elixhauser versions), Elixhauser and AHRQ included. Common ambiguities and code formats are handled.</p>
</div>
<div id="relevance" class="section level2">
<h2 class="hasAnchor">
<a href="#relevance" class="anchor"></a>Relevance</h2>
<p>ICD-9 codes are still in heavy use around the world, particularly in the USA where the ICD-9-CM (Clinical Modification) was in widespread use until the end of 2015. ICD-10 has been used worldwide for reporting cause of death for more than a decade, and ICD-11 is due to be released in 2018. ICD-10-CM is now the primary coding scheme for US hospital admission and discharge diagnoses used for regulatory purposes and billing. A vast amount of electronic patient data is recorded with ICD-9 codes of some kind: this package enables their use in R alongside ICD-10.</p>
</div>
<div id="comorbidities" class="section level2">
<h2 class="hasAnchor">
<a href="#comorbidities" class="anchor"></a>Comorbidities</h2>
<p>A common requirement for medical research involving patients is determining new or existing comorbidities. This is often reported in <em>Table 1</em> of research papers to demonstrate the similarity or differences of groups of patients. This package is focussed on fast and accurate generation of this comorbidity information from raw lists of ICD-9 codes.</p>
</div>
<div id="icd-9-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#icd-9-codes" class="anchor"></a>ICD-9 codes</h2>
<p>ICD-9 codes are not numbers, and great care is needed when matching individual codes and ranges of codes. It is easy to make mistakes, hence the need for this package. ICD-9 codes can be presented in <em>short</em> 5 character format, or <em>decimal</em> format, with a decimal place separating the code into two groups. There are also codes beginning with V and E which have different validation rules. Zeroes after a decimal place are meaningful, so numeric ICD-9 codes cannot be used in most cases. In addition, most clinical databases contain invalid codes, and even decimal and non-decimal format codes in different places. This package primarily deals with ICD-9-CM (Clinical Modification) codes, but should be applicable or easily extendible to the original WHO ICD-9 system.</p>
</div>
<div id="icd-10-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#icd-10-codes" class="anchor"></a>ICD-10 codes</h2>
<p>ICD-10 has a somewhat simpler format, with consistent use of a letter, then two alphanumeric characters. However, especially for ICD-10-CM, there are a multitude of qualifiers, e.g. specifying recurrence, laterality, which vastly increase the number of possible codes. This package recognizes validity of codes by syntax alone, or whether the codes appear in a canonical list. The current ICD-10-CM master list is the 2016 set. There is no capability of converting between ICD-9 and ICD-10, but comorbidities can be generated from older ICD-9 codes and newer ICD-10 codes in parallel, and the comorbidities can then be compared.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>See also the vignettes and examples embedded in the help for each function for more. Here’s a taste:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">patient_data</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;   visit_id  icd9  poa</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 1     1000 40201    Y</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 2     1000  2258 &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 3     1000  7208    N</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 4     1000 25001    Y</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 5     1001 34400    X</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 6     1001  4011    Y</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 7     1002  4011    E</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co"># get comorbidities using Quan's application of Deyo's Charlson comorbidity groups</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="kw"><a href="reference/comorbid.html">comorbid_charlson</a></span>(patient_data)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; codes: 40201 2258 7208 25001 34400 4011 4011 </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; codeHash.keys(): 4011 7208 34400 40201 25001 2258 </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; mat rows: 3, cols: 17</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; Map matrix rows: 3, and cols: 17</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; relevantSize = 3, vlen = 7</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; codes_cv: 40201 2258 7208 25001 34400 4011 4011 </span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; relevantKeys: 34400 40201 25001 </span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; rh.keys.size() = 3</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; visits are not factors, they are: 14 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; v: 1000 1000 1000 1000 1001 1001 1002 </span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; uv: 1000 1001 1002 </span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; visitIds: 1000 1001 1002 </span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt; rows: 1 1 1 1 2 2 3 </span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="co">#&gt; cols: 3 -2147483648 -2147483648 2 1 -2147483648 -2147483648 </span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">#&gt; n rows: 7, n cols: 7</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="co">#&gt; Built visMt, rows:3, cols: 3</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt; 0 1 1</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">#&gt; 1 0 0</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"><span class="co">#&gt; 0 0 0</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44"><span class="co">#&gt; Result rows: 3, cols: 17</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb2-46" data-line-number="46"><span class="co">#&gt; 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-47" data-line-number="47"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-48" data-line-number="48"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-49" data-line-number="49"><span class="co">#&gt; Map matrix rows: 3, and cols: 17</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb2-51" data-line-number="51"><span class="co">#&gt;         MI   CHF   PVD Stroke Dementia Pulmonary Rheumatic   PUD LiverMild</span></a>
<a class="sourceLine" id="cb2-52" data-line-number="52"><span class="co">#&gt; 1000 FALSE  TRUE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span></a>
<a class="sourceLine" id="cb2-53" data-line-number="53"><span class="co">#&gt; 1001 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span></a>
<a class="sourceLine" id="cb2-54" data-line-number="54"><span class="co">#&gt; 1002 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span></a>
<a class="sourceLine" id="cb2-55" data-line-number="55"><span class="co">#&gt;         DM  DMcx Paralysis Renal Cancer LiverSevere  Mets   HIV</span></a>
<a class="sourceLine" id="cb2-56" data-line-number="56"><span class="co">#&gt; 1000  TRUE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-57" data-line-number="57"><span class="co">#&gt; 1001 FALSE FALSE      TRUE FALSE  FALSE       FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-58" data-line-number="58"><span class="co">#&gt; 1002 FALSE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-59" data-line-number="59"></a>
<a class="sourceLine" id="cb2-60" data-line-number="60"><span class="co"># or go straight to the Charlson scores:</span></a>
<a class="sourceLine" id="cb2-61" data-line-number="61"><span class="kw"><a href="reference/charlson.html">charlson</a></span>(patient_data)</a>
<a class="sourceLine" id="cb2-62" data-line-number="62"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb2-63" data-line-number="63"><span class="co">#&gt; codes: 40201 2258 7208 25001 34400 4011 4011 </span></a>
<a class="sourceLine" id="cb2-64" data-line-number="64"><span class="co">#&gt; codeHash.keys(): 4011 7208 34400 40201 25001 2258 </span></a>
<a class="sourceLine" id="cb2-65" data-line-number="65"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb2-66" data-line-number="66"><span class="co">#&gt; mat rows: 3, cols: 17</span></a>
<a class="sourceLine" id="cb2-67" data-line-number="67"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb2-68" data-line-number="68"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-69" data-line-number="69"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-70" data-line-number="70"><span class="co">#&gt; 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-71" data-line-number="71"><span class="co">#&gt; Map matrix rows: 3, and cols: 17</span></a>
<a class="sourceLine" id="cb2-72" data-line-number="72"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb2-73" data-line-number="73"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb2-74" data-line-number="74"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb2-75" data-line-number="75"><span class="co">#&gt; relevantSize = 3, vlen = 7</span></a>
<a class="sourceLine" id="cb2-76" data-line-number="76"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb2-77" data-line-number="77"><span class="co">#&gt; codes_cv: 40201 2258 7208 25001 34400 4011 4011 </span></a>
<a class="sourceLine" id="cb2-78" data-line-number="78"><span class="co">#&gt; relevantKeys: 34400 40201 25001 </span></a>
<a class="sourceLine" id="cb2-79" data-line-number="79"><span class="co">#&gt; rh.keys.size() = 3</span></a>
<a class="sourceLine" id="cb2-80" data-line-number="80"><span class="co">#&gt; visits are not factors, they are: 14 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb2-81" data-line-number="81"><span class="co">#&gt; v: 1000 1000 1000 1000 1001 1001 1002 </span></a>
<a class="sourceLine" id="cb2-82" data-line-number="82"><span class="co">#&gt; uv: 1000 1001 1002 </span></a>
<a class="sourceLine" id="cb2-83" data-line-number="83"><span class="co">#&gt; visitIds: 1000 1001 1002 </span></a>
<a class="sourceLine" id="cb2-84" data-line-number="84"><span class="co">#&gt; rows: 1 1 1 1 2 2 3 </span></a>
<a class="sourceLine" id="cb2-85" data-line-number="85"><span class="co">#&gt; cols: 3 -2147483648 -2147483648 2 1 -2147483648 -2147483648 </span></a>
<a class="sourceLine" id="cb2-86" data-line-number="86"><span class="co">#&gt; n rows: 7, n cols: 7</span></a>
<a class="sourceLine" id="cb2-87" data-line-number="87"><span class="co">#&gt; Built visMt, rows:3, cols: 3</span></a>
<a class="sourceLine" id="cb2-88" data-line-number="88"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb2-89" data-line-number="89"><span class="co">#&gt; 0 1 1</span></a>
<a class="sourceLine" id="cb2-90" data-line-number="90"><span class="co">#&gt; 1 0 0</span></a>
<a class="sourceLine" id="cb2-91" data-line-number="91"><span class="co">#&gt; 0 0 0</span></a>
<a class="sourceLine" id="cb2-92" data-line-number="92"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb2-93" data-line-number="93"><span class="co">#&gt; Result rows: 3, cols: 17</span></a>
<a class="sourceLine" id="cb2-94" data-line-number="94"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb2-95" data-line-number="95"><span class="co">#&gt; 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-96" data-line-number="96"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-97" data-line-number="97"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-98" data-line-number="98"><span class="co">#&gt; Map matrix rows: 3, and cols: 17</span></a>
<a class="sourceLine" id="cb2-99" data-line-number="99"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb2-100" data-line-number="100"><span class="co">#&gt; 1000 1001 1002 </span></a>
<a class="sourceLine" id="cb2-101" data-line-number="101"><span class="co">#&gt;    2    2    0</span></a>
<a class="sourceLine" id="cb2-102" data-line-number="102"></a>
<a class="sourceLine" id="cb2-103" data-line-number="103"><span class="co"># get comorbidities based on present-on-arrival diagnoses, use magrittr to flow the data</span></a>
<a class="sourceLine" id="cb2-104" data-line-number="104">patient_data <span class="op">%&gt;%</span><span class="st"> </span>filter_poa <span class="op">%&gt;%</span><span class="st"> </span>comorbid_elix</a>
<a class="sourceLine" id="cb2-105" data-line-number="105"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb2-106" data-line-number="106"><span class="co">#&gt; codes: 40201 25001 4011 </span></a>
<a class="sourceLine" id="cb2-107" data-line-number="107"><span class="co">#&gt; codeHash.keys(): 40201 25001 4011 </span></a>
<a class="sourceLine" id="cb2-108" data-line-number="108"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb2-109" data-line-number="109"><span class="co">#&gt; mat rows: 2, cols: 31</span></a>
<a class="sourceLine" id="cb2-110" data-line-number="110"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb2-111" data-line-number="111"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-112" data-line-number="112"><span class="co">#&gt; 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-113" data-line-number="113"><span class="co">#&gt; Map matrix rows: 2, and cols: 31</span></a>
<a class="sourceLine" id="cb2-114" data-line-number="114"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb2-115" data-line-number="115"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb2-116" data-line-number="116"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb2-117" data-line-number="117"><span class="co">#&gt; relevantSize = 2, vlen = 3</span></a>
<a class="sourceLine" id="cb2-118" data-line-number="118"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb2-119" data-line-number="119"><span class="co">#&gt; codes_cv: 40201 25001 4011 </span></a>
<a class="sourceLine" id="cb2-120" data-line-number="120"><span class="co">#&gt; relevantKeys: 25001 4011 </span></a>
<a class="sourceLine" id="cb2-121" data-line-number="121"><span class="co">#&gt; rh.keys.size() = 2</span></a>
<a class="sourceLine" id="cb2-122" data-line-number="122"><span class="co">#&gt; visits are not factors, they are: 14 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb2-123" data-line-number="123"><span class="co">#&gt; v: 1000 1000 1001 </span></a>
<a class="sourceLine" id="cb2-124" data-line-number="124"><span class="co">#&gt; uv: 1000 1001 </span></a>
<a class="sourceLine" id="cb2-125" data-line-number="125"><span class="co">#&gt; visitIds: 1000 1001 </span></a>
<a class="sourceLine" id="cb2-126" data-line-number="126"><span class="co">#&gt; rows: 1 1 2 </span></a>
<a class="sourceLine" id="cb2-127" data-line-number="127"><span class="co">#&gt; cols: -2147483648 1 2 </span></a>
<a class="sourceLine" id="cb2-128" data-line-number="128"><span class="co">#&gt; n rows: 3, n cols: 3</span></a>
<a class="sourceLine" id="cb2-129" data-line-number="129"><span class="co">#&gt; Built visMt, rows:2, cols: 2</span></a>
<a class="sourceLine" id="cb2-130" data-line-number="130"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb2-131" data-line-number="131"><span class="co">#&gt; 1 0</span></a>
<a class="sourceLine" id="cb2-132" data-line-number="132"><span class="co">#&gt; 0 1</span></a>
<a class="sourceLine" id="cb2-133" data-line-number="133"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb2-134" data-line-number="134"><span class="co">#&gt; Result rows: 2, cols: 31</span></a>
<a class="sourceLine" id="cb2-135" data-line-number="135"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb2-136" data-line-number="136"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-137" data-line-number="137"><span class="co">#&gt; 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-138" data-line-number="138"><span class="co">#&gt; Map matrix rows: 2, and cols: 31</span></a>
<a class="sourceLine" id="cb2-139" data-line-number="139"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb2-140" data-line-number="140"><span class="co">#&gt;        CHF Arrhythmia Valvular  PHTN   PVD   HTN Paralysis NeuroOther</span></a>
<a class="sourceLine" id="cb2-141" data-line-number="141"><span class="co">#&gt; 1000 FALSE      FALSE    FALSE FALSE FALSE FALSE     FALSE      FALSE</span></a>
<a class="sourceLine" id="cb2-142" data-line-number="142"><span class="co">#&gt; 1001 FALSE      FALSE    FALSE FALSE FALSE  TRUE     FALSE      FALSE</span></a>
<a class="sourceLine" id="cb2-143" data-line-number="143"><span class="co">#&gt;      Pulmonary    DM  DMcx Hypothyroid Renal Liver   PUD   HIV Lymphoma</span></a>
<a class="sourceLine" id="cb2-144" data-line-number="144"><span class="co">#&gt; 1000     FALSE  TRUE FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE</span></a>
<a class="sourceLine" id="cb2-145" data-line-number="145"><span class="co">#&gt; 1001     FALSE FALSE FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE</span></a>
<a class="sourceLine" id="cb2-146" data-line-number="146"><span class="co">#&gt;       Mets Tumor Rheumatic Coagulopathy Obesity WeightLoss FluidsLytes</span></a>
<a class="sourceLine" id="cb2-147" data-line-number="147"><span class="co">#&gt; 1000 FALSE FALSE     FALSE        FALSE   FALSE      FALSE       FALSE</span></a>
<a class="sourceLine" id="cb2-148" data-line-number="148"><span class="co">#&gt; 1001 FALSE FALSE     FALSE        FALSE   FALSE      FALSE       FALSE</span></a>
<a class="sourceLine" id="cb2-149" data-line-number="149"><span class="co">#&gt;      BloodLoss Anemia Alcohol Drugs Psychoses Depression</span></a>
<a class="sourceLine" id="cb2-150" data-line-number="150"><span class="co">#&gt; 1000     FALSE  FALSE   FALSE FALSE     FALSE      FALSE</span></a>
<a class="sourceLine" id="cb2-151" data-line-number="151"><span class="co">#&gt; 1001     FALSE  FALSE   FALSE FALSE     FALSE      FALSE</span></a></code></pre></div>
<p>Look at the help files for details and examples of almost every function in this package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">?comorbid</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">?comorbid_hcc</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">?explain_code</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">?is_valid</a></code></pre></div>
<p>Note that reformatting from wide to long and back is not as straightforward as using the various Hadley Wickham tools for doing this: knowing the more detailed structure of the data let’s us do this better for the case of dealing with ICD codes.</p>
</div>
<div id="advanced" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced" class="anchor"></a>Advanced</h2>
<div id="source-data-and-sas-format-files" class="section level3">
<h3 class="hasAnchor">
<a href="#source-data-and-sas-format-files" class="anchor"></a>Source Data and SAS format files</h3>
<p>In the spirit of reproducible research, all the R data files in this package can be recreated from source. The size of the source files makes it cumbersome to include them in the R package available on CRAN. Using the github source, you can pull the original data and SAS format files, and rebuild the data; or use the tools provided by this package to update the data using new source data files, e.g. when ICD-10-CM 2017 is released.</p>
</div>
<div id="development-version" class="section level3">
<h3 class="hasAnchor">
<a href="#development-version" class="anchor"></a>Development version</h3>
<p>The latest version is available in <a href="https://github.com/jackwasey/icd">github icd</a>, and can be installed with:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">    <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">    devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"jackwasey/icd"</span>)</a></code></pre></div>
<p>The <em>master</em> branch at github should always build and pass all tests and R CMD check, and will be similar or identical to the most recent CRAN release. The CRAN releases are stable milestones. Contributions and bug reports are encouraged and essential for this package to remain current and useful to the many people who have installed it.</p>
</div>
<div id="contributing-and-building" class="section level3">
<h3 class="hasAnchor">
<a href="#contributing-and-building" class="anchor"></a>Contributing and Building</h3>
<p>A substantial amount of code has now been contributed to the package. Contributions of any kind to <code>icd</code> are very welcome. See the [GitHub issues page]](<a href="https://github.com/jackwasey/icd/issues" class="uri">https://github.com/jackwasey/icd/issues</a>) to see jobs and feature requests. Documentation, vignettes and examples are very welcome, especially if accompanied by some real-world data.</p>
<p>To build <code>icd</code>, <code>Rcpp</code> must be compiled from source. This happens automatically on Linux, but on Mac and Windows, the following may be required: <code>install.packages("Rcpp", type="source")</code></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=icd">https://​cloud.r-project.org/​package=icd</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jackwasey/icd/issues">https://​github.com/​jackwasey/​icd/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jack O. Wasey <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-3738-4637" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=icd"><img src="https://www.r-pkg.org/badges/version/icd" title="CRAN" alt="CRAN"></a></li>
<li><a href="https://github.com/jackwasey/icd"><img src="https://img.shields.io/badge/devel%20version-3.2.1-blue.svg?style=flat" title="GitHub" alt="GitHub"></a></li>
<li><a href="https://travis-ci.org/jackwasey/icd"><img src="https://travis-ci.org/jackwasey/icd.svg?branch=master" title="Travis Build Status" alt="Travis"></a></li>
<li><a href="https://ci.appveyor.com/project/jackwasey/icd/branch/master"><img src="https://ci.appveyor.com/api/projects/status/9ncfgxht3n5i8t60/branch/master?svg=true" title="Appveyor Build Status" alt="Appveyor"></a></li>
<li><a href="https://codecov.io/github/jackwasey/icd?branch=master"><img src="https://codecov.io/github/jackwasey/icd/coverage.svg?branch=master" title="Core Code Coverage" alt="codecov.io"></a></li>
<li><a href="https://bestpractices.coreinfrastructure.org/projects/2092"><img src="https://bestpractices.coreinfrastructure.org/projects/2092/badge" alt="CII Best Practices"></a></li>
<li><a href="https://cran.r-project.org/package=icd"><img src="https://cranlogs.r-pkg.org/badges/icd" title="RStudio Mirror Downloads Last Calendar Month" alt="CRAN RStudio mirror downloads last calendar month"></a></li>
<li><a href="https://cran.r-project.org/package=icd"><img src="https://cranlogs.r-pkg.org/badges/last-week/icd" title="RStudio Mirror Downloads Last Week" alt="CRAN RStudio mirror downloads last week"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jack O. Wasey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '797795ae271734faa8bc9b1f4aaae82b',
    indexName: 'icd',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
