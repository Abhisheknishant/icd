<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ICD-10 comorbidities • icd</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="ICD-10 comorbidities">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">icd</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">3.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Charlson_and_other_scores.html">Charlson and Van Walraven scores</a>
    </li>
    <li>
      <a href="../articles/Comparing_Comorbidity_Mappings_Vignette.html">Comparing Comorbidity Mappings</a>
    </li>
    <li>
      <a href="../articles/Efficient_calculation_of_comorbidities_from_medical_codes.pdf">icd: Efficient Computation of Comorbidities from ICD Codes Using Sparse Matrix Multiplication in R (PDF)</a>
    </li>
    <li>
      <a href="../articles/Ranges.html">Ranges of ICD codes</a>
    </li>
    <li>
      <a href="../articles/Using_Hierarchical_Condition_Codes.html">Using Hierarchical Condition Codes</a>
    </li>
    <li>
      <a href="../articles/icd-10.html">ICD-10 comorbidities</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Quick Introduction to icd</a>
    </li>
    <li>
      <a href="../articles/pccc.html">Pediatric Complex Chronic Conditions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ICD-10 comorbidities</h1>
                        <h4 class="author">Jack O. Wasey</h4>
            
            <h4 class="date">8 May, 2018</h4>
      
      
      <div class="hidden name"><code>icd-10.Rmd</code></div>

    </div>

    
    
<!--
Copyright (C) 2014 - 2018  Jack O. Wasey

This file is part of icd.

icd is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

icd is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with icd. If not, see <http:#www.gnu.org/licenses/>.
-->
<p>This package now includes ICD-10 support, with some sample ICD-10-CM data, and comorbidity mappings from ICD-10 codes to comorbidities. There are also 2018 ICD-10-CM procedure codes, and a mapping to categorize these from AHRQ. The sample data are from <a href="https://ustur.wsu.edu/about-us/" class="uri">https://ustur.wsu.edu/about-us/</a> where de-identified diagnoses are given for a few hundred pathology cases relating to uranium exposure.</p>
<p>The sample data is in the ‘long’ format, i.e., multiple rows per case</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">uranium_pathology[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]
<span class="co">#&gt;    case icd10</span>
<span class="co">#&gt; 1     1 F17.9</span>
<span class="co">#&gt; 2     1 I21.9</span>
<span class="co">#&gt; 3     1 K75.9</span>
<span class="co">#&gt; 4     1   R55</span>
<span class="co">#&gt; 5     2 I25.1</span>
<span class="co">#&gt; 6     2 I35.8</span>
<span class="co">#&gt; 7     2 I63.9</span>
<span class="co">#&gt; 8     2   I64</span>
<span class="co">#&gt; 9     2 J43.9</span>
<span class="co">#&gt; 10    2 J84.1</span></code></pre></div>
<p>We can convert the date from long to wide format easily. This is done quickly in C++, and gives reliable output with factors). It also has other features which make it work well with other functions in this package. However, you may be happier using  and friends for this manipulation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">uranium_pathology <span class="op">%&gt;%</span><span class="st"> </span>long_to_wide <span class="op">%&gt;%</span><span class="st"> </span>head
<span class="co">#&gt;   [,1]    [,2]    [,3]    [,4]    [,5]    [,6]    [,7]    [,8]   </span>
<span class="co">#&gt; 1 "F17.9" "I21.9" "K75.9" "R55"   NA      NA      NA      NA     </span>
<span class="co">#&gt; 2 "I25.1" "I35.8" "I63.9" "I64"   "J43.9" "J84.1" "K57.9" "N39.0"</span>
<span class="co">#&gt; 3 "I21.9" "I25.1" NA      NA      NA      NA      NA      NA     </span>
<span class="co">#&gt; 4 "T14.1" "X74"   NA      NA      NA      NA      NA      NA     </span>
<span class="co">#&gt; 5 "C34.9" "C77.1" "C77.2" "C78.0" "C78.7" "C79.7" "I51.7" "K57.9"</span>
<span class="co">#&gt; 6 "A16.9" "I12.9" "I21.9" "I25.1" "I25.9" "I70.0" "J45.9" "N26"</span></code></pre></div>
<p>Now map these diagnoses to disease groups as defined by Quan et al:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">quan_comorbidities &lt;-<span class="st"> </span><span class="kw"><a href="../reference/comorbid.html">comorbid</a></span>(uranium_pathology, icd10_map_quan_elix)
<span class="co"># see the first few rows and columns:</span>
quan_comorbidities[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">10</span>]
<span class="co">#&gt;   Valvular  PHTN   PVD   HTN HTNcx Paralysis NeuroOther Pulmonary</span>
<span class="co">#&gt; 1    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE</span>
<span class="co">#&gt; 2     TRUE FALSE FALSE FALSE FALSE     FALSE      FALSE      TRUE</span>
<span class="co">#&gt; 3    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE</span>
<span class="co">#&gt; 4    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE</span>
<span class="co">#&gt; 5    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE</span>
<span class="co">#&gt; 6    FALSE FALSE  TRUE FALSE  TRUE     FALSE      FALSE      TRUE</span></code></pre></div>
<p>The ICD-10-CM mappings are recorded a bit differently from the ICD-9-CM mappings in this package. The ICD-9 mappings included all possible permutations of child codes. Since ICD-10 codes contain letters, and are seven characters long, this became impractical. Therefore, the current mappings include only codes for the most recent update of ICD-10-CM. The code which assigns comorbidities for ICD-10 therefore doesn’t rely on all the possible codes being listed in the mappings, so it will (more slowly) search for each possible parent of the given code, up to the three digit ‘major’ (e.g. if Cholera was in the comorbidity mapping, then A0034212647 would eventually match A00)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create trivial comorbidity map:</span>
cholera_typhoid_map &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">cholera =</span> <span class="st">"A00"</span>, <span class="dt">typhoid =</span> <span class="st">"A01"</span>)
patients &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">patient =</span> <span class="kw">c</span>(<span class="st">"0001"</span>, <span class="st">"0001"</span>, <span class="st">"0002"</span>), <span class="dt">code =</span> <span class="kw">c</span>(<span class="st">"A001234567"</span>, <span class="st">"A01"</span>, <span class="st">"A019"</span>))
<span class="kw"><a href="../reference/comorbid.html">comorbid</a></span>(patients , <span class="dt">map =</span> cholera_typhoid_map)
<span class="co">#&gt;      cholera typhoid</span>
<span class="co">#&gt; 0001    TRUE    TRUE</span>
<span class="co">#&gt; 0002   FALSE    TRUE</span></code></pre></div>
<p>Here are the codes for hypertension with complications from Quan et al. Note that the vector has class <code>icd10</code> and has the attribute <code>icd_short_diag</code> indicating there are no decimal point delimiters in the codes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">icd10_map_quan_elix<span class="op">$</span>HTNcx
<span class="co">#&gt;  [1] "I11"   "I110"  "I119"  "I12"   "I120"  "I129"  "I13"   "I130" </span>
<span class="co">#&gt;  [9] "I131"  "I1310" "I1311" "I132"  "I15"   "I150"  "I151"  "I152" </span>
<span class="co">#&gt; [17] "I158"  "I159" </span>
<span class="co">#&gt; attr(,"icd_short_diag")</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "icd10"     "character"</span></code></pre></div>
<div id="procedure-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#procedure-codes" class="anchor"></a>Procedure codes</h2>
<p>The AHRQ publishes an annually updated categorization of ICD-10-CM procedure codes into four classes, representing diagnostic and therapeutic procedures, each being either minor or major.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1441</span>)
pts &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="kw">sample</span>(LETTERS, <span class="dv">10</span>),
                  <span class="dt">pc =</span> <span class="kw">sample</span>(icd10_pcs[[<span class="st">"2018"</span>]]<span class="op">$</span>code, <span class="dv">10</span>))
res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/comorbid.html">icd10_comorbid</a></span>(pts,
                      <span class="dt">map =</span> icd10_map_ahrq_pcs, 
                      <span class="dt">icd_name =</span> <span class="st">"pc"</span>,
                      <span class="dt">return_binary =</span> <span class="ot">TRUE</span>)
<span class="kw">print</span>(res)
<span class="co">#&gt;   Minor Diagnostic Minor Therapeutic Major Diagnostic Major Therapeutic</span>
<span class="co">#&gt; J                0                 0                0                 1</span>
<span class="co">#&gt; A                0                 0                0                 1</span>
<span class="co">#&gt; Z                1                 0                0                 0</span>
<span class="co">#&gt; L                0                 1                0                 0</span>
<span class="co">#&gt; H                0                 0                0                 1</span>
<span class="co">#&gt; D                0                 1                0                 0</span>
<span class="co">#&gt; E                0                 1                0                 0</span>
<span class="co">#&gt; C                0                 0                0                 1</span>
<span class="co">#&gt; W                0                 0                0                 1</span>
<span class="co">#&gt; T                1                 0                0                 0</span>
<span class="kw">colSums</span>(res)
<span class="co">#&gt;  Minor Diagnostic Minor Therapeutic  Major Diagnostic Major Therapeutic </span>
<span class="co">#&gt;                 2                 3                 0                 5</span></code></pre></div>
<p>For more information on working with ICD-10 codes, see the introduction vignette, and function examples. E.g.</p>
<pre><code><a href="../reference/comorbid.html">?comorbid
?explain</a></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#procedure-codes">Procedure codes</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jack O. Wasey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '797795ae271734faa8bc9b1f4aaae82b',
    indexName: 'icd',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
